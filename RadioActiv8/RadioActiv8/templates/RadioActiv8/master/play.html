{% extends 'RadioActiv8/master/heading.html' %}
{% load bootstrap4 %}
{% block bootstrap4_title %}RadioActiv8 - Play{% endblock %}
{% block bootstrap4_content %}

<div style="color: var(--light);background: var(--dark);">
    <!-- Start: Patrol Control Frame -->
    <main>
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
        <!-- Start: 7 Rows 1+4 Columns -->
        <div class="container">

            <div class="row justify-content-center" style="padding: 5px 0px;">
                <div class="col-md-12 col-xl-12 offset-xl-0 text-monospace"></div>
            </div>

            <div class="dashed-border">
                <div class="row mx-0 justify-content-center grey-bg-warning-text"
                    style="padding: 10px 0px 0px 0px;">
                    <div class="col-md-3 col-xl-3 offset-xl-0 text-monospace">
                        <div class="form-group">
                            <!-- Start: Sort by "Longest Time since used" -->
                            <h1 class="text-monospace text-uppercase font-weight-bold"
                                style="font-size: 12pt;color: var(--black);">AVAILABLE BASES:
                            </h1>
                            <!-- End: Sort by "Longest Time since used" -->
                            <ul class="list-unstyled text-monospace text-uppercase">
                                {% if available_bases %}
                                {% for available_base in available_bases %}
                                <li><a class="text-success" href="#">{{ available_base }} ({{ available_base.get_patrols_count }}/{% if available_base.max_patrols == 0 %}âˆž{% else %}{{ available_base.max_patrols }}{% endif %})</a></li>
                                {% endfor %}
                                {% else %}
                                <li>NO AVAILABLE BASES!!!</li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3 col-xl-3 offset-xl-0 text-monospace">
                        <div class="form-group">
                            <!-- Start: sort by "Last Updated" -->
                            <h1 class="text-monospace text-uppercase font-weight-bold"
                                style="font-size: 12pt;color: var(--black);">
                                BUSY PATROLS:
                            </h1>
                            <!-- End: sort by "Last Updated" -->
                            <ul class="list-unstyled text-monospace text-uppercase text-light">
                                {% if busy_patrols %}
                                {% for busy_patrol in busy_patrols %}
                                <li><a class="text-danger" href="#">{{busy_patrol.name}}</a> @ <a class="text-warning"
                                        href="#">{{busy_patrol.current_base.name}}</a></li>
                                {% endfor %}
                                {% else %}
                                <li>NO BUSY PATROLS!!!</li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3 col-xl-3 offset-xl-0 text-monospace">
                        <div class="form-group">
                            <h1 class="text-monospace text-uppercase font-weight-bold"
                                style="font-size: 12pt;color: var(--black);">FULL BASES:</h1>
                            <ul class="list-unstyled text-monospace text-light">
                                {% if full_bases %}
                                {% for full_base in full_bases %}
                                <li>
                                    <a class="text-nowrap text-danger" href="#">{{full_base.name}}</a>:<br />
                                    {% for patrol in full_base.get_patrols %}
                                    <a class="text-warning" href="#">{{patrol.name}}</a>{% if not forloop.last %},{% endif %}
                                    {% endfor %}
                                </li>
                                {% endfor %}
                                {% else %}
                                <li>NO FULL BASES ðŸ˜€</li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row justify-content-center" style="padding: 10px 0px;">
                <div class="col-md-12 col-xl-12 offset-xl-0 text-monospace"></div>
            </div>

            <div class="dashed-border">
                    <div class="row mx-0 justify-content-center grey-bg-warning-text"
                        style="padding: 10px 0px 0px 0px;">
                        <div class="col-md-12 col-xl-12 offset-xl-0 text-monospace">
                            <h4 class="text-monospace font-weight-bold">Log Event</h4>
                        </div>
                    </div>
            <strong>Expected Location:</strong> <span id='expected_location'>UNKNOWN</span>
            <form method="post" data-ajax-url="{% url 'RadioActiv8:event_ajax' %}">{% csrf_token %}
                {{ form.as_p }}
                {{ form.media }}
                <input type="submit" value="Add Event">
            </form>
            <strong>Base history:</strong>
            <ol id='base_history'>
            <li>UNKNOWN</li>
            </ol>
            </form>
        </div>
</div>
<!-- End: 7 Rows 1+4 Columns -->
</main>
<!-- End: Patrol Control Frame-->
</div>

{% endblock %}